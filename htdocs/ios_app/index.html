<!doctype html>
<html>
	<head>
      	<script type="text/javascript" src="jquery.js"></script>
		<link href='https://fonts.googleapis.com/css?family=Advent+Pro:400,500,600,700,300,200,100' rel='stylesheet' type='text/css'>
		<meta name="apple-mobile-web-app-capable" content="yes" />
      	<meta name="apple-mobile-web-app-status-bar-style" content="default" />
      	<meta name="viewport" content="user-scalable=no, width=device-width" />
		<style>
			body {
				font-family: "Advent Pro";
			}
			* {
				box-sizing: border-box;
			}
			body, html {
				padding: 0;
				margin: 0;
			}
			h1 {
				padding: 0;
				margin: 0;
			}
			section {
				width: 100%;
				padding: 10px;
				position: absolute;
			}
			.appTitle {
				font-weight: 100;
				text-align: center;
				font-size:36pt;
				width: 100%;
			}
			.hiding {
				display: none;
			}
			section > p {
				font-weight: 300;
				text-align: center;
			}
			.pin-form input[type="text"], 
			.pin-form input[type="password"],
			.pin-form input[type="button"]
			{
				border: 1px solid;
				width: 15%;
				margin-left: 5%;
				height: 50px;
				font-size: 36pt;
				border-radius: 0;
				text-align: center;
			}
			.pin-form input[disabled] {
				background: #ffffff;
				color: #000000;
				border: 1px solid;
				margin-left: 7%;
			}
			.pin-form input[type="button"] {
				width: 33%;
				height: 100px;
				border-radius: 50px;
				background: #000000;
				color: #ffffff;
				margin:0;
				padding: 0;
				-webkit-appearance:none;
				float:left;
			}
		</style>
		<title>Ciphertext</title>
	</head>
	<body>

		<section id="app_page" class="hiding">
			<h1 class="appTitle">Ciphertext</h1>
		</section>

		<section id="app_setup" class="hiding">
			<h1 class="appTitle">Ciphertext</h1>
			<p>Choose a Master PIN.</p>

			<form action="" method="post" class="pin-form" id="new_masterpass_form">
				<input type="password" class="pin-display" maxlength="1" data-idx="0" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="1" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="2" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="3" disabled>

				<p></p>

				<input type="button" value="1">
				<input type="button" value="2">
				<input type="button" value="3"><br>
				<input type="button" value="4">
				<input type="button" value="5">
				<input type="button" value="6"><br>
				<input type="button" value="7">
				<input type="button" value="8">
				<input type="button" value="9"><br>
				<input type="button" value="0">
				<input type="button" value="<<" class="pin-back">
			</form>
		</section>

		<section id="app_login" class="hiding">
			<h1 class="appTitle">Ciphertext</h1>
			<p>Enter Your Master PIN.</p>

			<form action="" method="post" class="pin-form" id="login_masterpass_form">
				<input type="password" class="pin-display" maxlength="1" data-idx="0" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="1" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="2" disabled>
				<input type="password" class="pin-display" maxlength="1" data-idx="3" disabled>

				<p></p>

				<input type="button" value="1">
				<input type="button" value="2">
				<input type="button" value="3"><br>
				<input type="button" value="4">
				<input type="button" value="5">
				<input type="button" value="6"><br>
				<input type="button" value="7">
				<input type="button" value="8">
				<input type="button" value="9"><br>
				<input type="button" value="0">
				<input type="button" value="<<" class="pin-back">
			</form>
		</section>

		<script>
			$(function(){

				var pin_index = 0;

				$("#app_setup")
					.css({top: parseInt($(window).height() + 1, 10)});

				$("#app_login")
					.css({top: parseInt($(window).height() + 1, 10)});

				$("#new_masterpass_form input[type=button]")
					.on("mousedown", function(){
					var which_pin = pin_index;
					if ($)this).hasClass("pin-back")) {
						$("#new_masterpass_form input[data-idx="+which_pin+"]").val('');
						if (which_pin > 0) {
							which_pin = which_pin - 1;
						}
					} else {
						var btn_val = $(this).val();
						$("#new_masterpass_form input[data-idx="+which_pin+"]").val(btn_val);
						if (which_pin < 3) {
							which_pin = which_pin + 1;
						}
					}
					return false;
				});

				$("#login_masterpass_form input[type=button]")
					.on("mousedown", function(){
					var which_pin = pin_index;
					if ($)this).hasClass("pin-back")) {
						$("#login_masterpass_form input[data-idx="+which_pin+"]").val('');
						if (which_pin > 0) {
							which_pin = which_pin - 1;
						}
					} else {
						var btn_val = $(this).val();
						$("#login_masterpass_form input[data-idx="+which_pin+"]").val(btn_val);
						if (which_pin < 3) {
							which_pin = which_pin + 1;
						}
					}
					return false;
				});

				$("#new_masterpass_form")
					.on("submit", function(){
					return false;
				});

				$("#login_masterpass_form")
					.on("submit", function(){

					return false;

				});

				var setup_app_password = window.localStorage.getItem("ct_masterpass");

				if ( !setup_app_password ) {
					pin_index = 0;
					$("#app_setup")
						.css({display: "block"})
						.animate({top: 0});
				} else {
					pin_index = 0;
					$("#app_login")
						.css({display: "block"})
						.animate({top: 0});
				}
			});
		</script>
	</body>
</html>